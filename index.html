<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FAST – Academic Support System</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f7fa;
  padding: 16px;
}
.container {
  max-width: 1100px;
  margin: auto;
  background: #ffffff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,.08);
}
h1, h2 {
  color: #1f2937;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
}
th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
}
th {
  background: #f0f2f5;
}
.status {
  color: red;
  margin-bottom: 10px;
}
</style>

<!-- Load PapaParse locally (mobile-safe) -->
<script src="papaparse.min.js"></script>
</head>

<body>
<div class="container">

<h1>Foundation in Science & Technology<br>Academic Support (FAST)</h1>

<div id="status" class="status"></div>

<h2>Students</h2>
<table>
<thead>
<tr>
<th>No</th>
<th>Student ID</th>
<th>Name</th>
<th>Program</th>
<th>Admit Term</th>
<th>CGPA</th>
<th>Advisor</th>
</tr>
</thead>
<tbody id="studentsTable"></tbody>
</table>

<h2>Courses</h2>
<table>
<thead>
<tr>
<th>Course Code</th>
<th>Course Name</th>
</tr>
</thead>
<tbody id="coursesTable"></tbody>
</table>

</div>

<script>
const statusDiv = document.getElementById("status");
const studentsTable = document.getElementById("studentsTable");
const coursesTable = document.getElementById("coursesTable");

function showError(msg) {
  statusDiv.innerText = msg;
}

// ================= LOAD STUDENTS =================
Papa.parse("data/students.csv", {
  download: true,
  header: true,
  complete: function (res) {
    if (!res.data || res.data.length === 0) {
      showError("Students CSV loaded but empty.");
      return;
    }

    studentsTable.innerHTML = "";
    res.data.forEach((s, i) => {
      if (!s.StudentID) return;
      studentsTable.innerHTML += `
        <tr>
          <td>${i + 1}</td>
          <td>${s.StudentID}</td>
          <td>${s.Name}</td>
          <td>${s.Program}</td>
          <td>${s.AdmitTerm}</td>
          <td>${s.CGPA}</td>
          <td>${s.AdvisorName}</td>
        </tr>`;
    });
  },
  error: function () {
    showError("❌ Failed to load data/students.csv");
  }
});

// ================= LOAD COURSES =================
Papa.parse("data/courses.csv", {
  download: true,
  header: true,
  complete: function (res) {
    if (!res.data || res.data.length === 0) return;

    coursesTable.innerHTML = "";
    res.data.forEach(c => {
      if (!c.CourseCode) return;
      coursesTable.innerHTML += `
        <tr>
          <td>${c.CourseCode}</td>
          <td>${c.CourseName}</td>
        </tr>`;
    });
  },
  error: function () {
    showError("❌ Failed to load data/courses.csv");
  }
});
</script>

</body>
</html>
